{"version":3,"file":"register.js","sources":["pages/register/register.vue","../../../../../Program Files/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIudnVl"],"sourcesContent":["<template>\r\n  <view class=\"register-container\">\r\n    <view class=\"register-box\">\r\n      <view class=\"register-header\">\r\n        <text class=\"title\">云健健身</text>\r\n        <text class=\"subtitle\">会员注册</text>\r\n      </view>\r\n      <view class=\"register-form\">\r\n        <view class=\"form-item\">\r\n          <input\r\n            class=\"input\"\r\n            type=\"text\"\r\n            placeholder=\"请输入用户名（3-20位字母、数字、下划线）\"\r\n            v-model=\"registerForm.username\"\r\n            @blur=\"checkUsername\"\r\n          />\r\n        </view>\r\n        <view class=\"form-item\">\r\n          <input\r\n            class=\"input\"\r\n            type=\"number\"\r\n            placeholder=\"请输入手机号\"\r\n            v-model=\"registerForm.phone_number\"\r\n            @blur=\"checkPhone\"\r\n          />\r\n        </view>\r\n        <view class=\"form-item\">\r\n          <input\r\n            class=\"input\"\r\n            type=\"password\"\r\n            placeholder=\"请输入密码（至少6位）\"\r\n            v-model=\"registerForm.password\"\r\n          />\r\n        </view>\r\n        <view class=\"form-item\">\r\n          <input\r\n            class=\"input\"\r\n            type=\"password\"\r\n            placeholder=\"请确认密码\"\r\n            v-model=\"registerForm.confirmPassword\"\r\n          />\r\n        </view>\r\n        <button class=\"register-button\" :loading=\"loading\" @click=\"handleRegister\">\r\n          注册\r\n        </button>\r\n        <view class=\"login-link\">\r\n          <text>已有账号？</text>\r\n          <text class=\"link\" @click=\"goToLogin\">立即登录</text>\r\n        </view>\r\n      </view>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { register, checkUsernameExists, checkPhoneExists } from '../../api/auth.js'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      registerForm: {\r\n        username: '',\r\n        phone_number: '',\r\n        password: '',\r\n        confirmPassword: ''\r\n      },\r\n      loading: false\r\n    }\r\n  },\r\n  methods: {\r\n    async checkUsername() {\r\n      if (!this.registerForm.username || this.registerForm.username.length < 3) {\r\n        return\r\n      }\r\n      try {\r\n        const exists = await checkUsernameExists(this.registerForm.username)\r\n        if (exists) {\r\n          uni.showToast({\r\n            title: '该用户名已被使用',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.warn('检查用户名失败:', error)\r\n      }\r\n    },\r\n    async checkPhone() {\r\n      if (!this.registerForm.phone_number || !/^1[3-9]\\d{9}$/.test(this.registerForm.phone_number)) {\r\n        return\r\n      }\r\n      try {\r\n        const exists = await checkPhoneExists(this.registerForm.phone_number)\r\n        if (exists) {\r\n          uni.showToast({\r\n            title: '该手机号已被注册',\r\n            icon: 'none'\r\n          })\r\n        }\r\n      } catch (error) {\r\n        console.warn('检查手机号失败:', error)\r\n      }\r\n    },\r\n    async handleRegister() {\r\n      // 验证\r\n      if (!this.registerForm.username) {\r\n        uni.showToast({\r\n          title: '请输入用户名',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      if (this.registerForm.username.length < 3 || this.registerForm.username.length > 20) {\r\n        uni.showToast({\r\n          title: '用户名长度为3-20位',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      if (!/^[a-zA-Z0-9_]+$/.test(this.registerForm.username)) {\r\n        uni.showToast({\r\n          title: '用户名只能包含字母、数字和下划线',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      if (!this.registerForm.phone_number) {\r\n        uni.showToast({\r\n          title: '请输入手机号',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      if (!/^1[3-9]\\d{9}$/.test(this.registerForm.phone_number)) {\r\n        uni.showToast({\r\n          title: '请输入正确的手机号',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      if (!this.registerForm.password) {\r\n        uni.showToast({\r\n          title: '请输入密码',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      if (this.registerForm.password.length < 6) {\r\n        uni.showToast({\r\n          title: '密码长度不能少于6位',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      if (this.registerForm.password !== this.registerForm.confirmPassword) {\r\n        uni.showToast({\r\n          title: '两次输入的密码不一致',\r\n          icon: 'none'\r\n        })\r\n        return\r\n      }\r\n      \r\n      this.loading = true\r\n      try {\r\n        await register({\r\n          username: this.registerForm.username,\r\n          phone_number: this.registerForm.phone_number,\r\n          password: this.registerForm.password\r\n        })\r\n        uni.showToast({\r\n          title: '注册成功，请登录',\r\n          icon: 'success'\r\n        })\r\n        setTimeout(() => {\r\n          uni.navigateBack()\r\n        }, 1500)\r\n      } catch (error) {\r\n        uni.showToast({\r\n          title: error.message || '注册失败，请重试',\r\n          icon: 'none'\r\n        })\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n    goToLogin() {\r\n      uni.navigateBack()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-container {\r\n  width: 100%;\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 40rpx;\r\n}\r\n\r\n.register-box {\r\n  width: 100%;\r\n  max-width: 600rpx;\r\n  background: #ffffff;\r\n  border-radius: 32rpx;\r\n  padding: 80rpx 60rpx;\r\n  box-shadow: 0 20rpx 80rpx rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.register-header {\r\n  text-align: center;\r\n  margin-bottom: 80rpx;\r\n}\r\n\r\n.title {\r\n  display: block;\r\n  font-size: 64rpx;\r\n  font-weight: 600;\r\n  color: #303133;\r\n  margin-bottom: 16rpx;\r\n}\r\n\r\n.subtitle {\r\n  display: block;\r\n  font-size: 28rpx;\r\n  color: #909399;\r\n}\r\n\r\n.register-form {\r\n  width: 100%;\r\n}\r\n\r\n.form-item {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.input {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  padding: 0 24rpx;\r\n  background: #f5f7fa;\r\n  border-radius: 16rpx;\r\n  font-size: 28rpx;\r\n  color: #303133;\r\n}\r\n\r\n.register-button {\r\n  width: 100%;\r\n  height: 88rpx;\r\n  background: #667eea;\r\n  color: #ffffff;\r\n  border-radius: 16rpx;\r\n  font-size: 32rpx;\r\n  font-weight: 500;\r\n  margin-top: 40rpx;\r\n  border: none;\r\n}\r\n\r\n.login-link {\r\n  text-align: center;\r\n  margin-top: 40rpx;\r\n  font-size: 28rpx;\r\n  color: #909399;\r\n}\r\n\r\n.link {\r\n  color: #667eea;\r\n  margin-left: 8rpx;\r\n}\r\n</style>\r\n\r\n","import MiniProgramPage from 'D:/Code/Java/CloudFitness/user/cloudfit/pages/register/register.vue'\nwx.createPage(MiniProgramPage)"],"names":["checkUsernameExists","uni","checkPhoneExists","register"],"mappings":"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"}