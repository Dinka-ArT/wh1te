# 云健健身小程序 - 功能实现说明

## 概述

本项目是基于 uniapp 开发的健身管理小程序 MVP 版本，对应 CloudFitness 项目的移动端应用。已实现核心功能，可以正常运行。

## 已实现功能清单

### ✅ 1. 用户认证模块

#### 登录功能 (`pages/login/login.vue`)
- 用户名和密码登录
- 登录状态验证
- Token 自动保存和管理
- 登录成功后跳转到首页
- 未登录自动跳转到登录页

#### 注册功能 (`pages/register/register.vue`)
- 用户注册（用户名、手机号、密码）
- 用户名格式验证（3-20位字母、数字、下划线）
- 手机号格式验证
- 密码长度验证（至少6位）
- 用户名和手机号唯一性检查
- 注册成功后跳转到登录页

### ✅ 2. 首页模块 (`pages/index/index.vue`)

- **欢迎信息**：显示用户名和当前日期
- **会员卡状态卡片**：
  - 显示会员卡类型
  - 显示有效期
  - 显示会员卡状态（有效/已过期）
- **今日课程卡片**：
  - 显示今日课程列表（最多3个）
  - 显示课程名称和时间
  - 点击跳转到课程中心
- **预约概览卡片**：
  - 显示总预约数
  - 显示待开始预约数
  - 显示已完成预约数
- **快捷入口**：
  - 课程预约
  - 储物柜
  - 个人中心

### ✅ 3. 课程中心模块 (`pages/courses/courses.vue`)

- **课程列表展示**：
  - 显示课程名称、时间、教练、预约人数
  - 显示课程状态（未开始/即将开始/已结束）
- **课程筛选**：
  - 按日期筛选课程
- **课程详情**：
  - 弹窗显示课程详细信息
  - 显示开课时间、状态、教练、预约人数、课程介绍
- **课程预约**：
  - 立即预约功能
  - 取消预约功能
  - 预约状态判断（是否已预约、是否可预约）
- **预约限制**：
  - 已结束的课程不能预约
  - 已满员的课程不能预约
  - 已预约的课程显示"取消预约"

### ✅ 4. 我的预约模块 (`pages/reservations/reservations.vue`)

- **预约列表**：
  - 显示所有预约记录
  - 显示课程名称、预约时间、课程时间、教练、状态
- **预约详情**：
  - 弹窗显示预约详细信息
  - 显示签到状态
  - 显示签到时间（如已签到）
  - 显示是否准时（如已签到）
- **取消预约**：
  - 可以取消未开始和已确认的预约
  - 已完成的预约不能取消
  - 已取消的预约不能再次取消

### ✅ 5. 储物柜模块 (`pages/lockers/lockers.vue`)

- **储物柜列表**：
  - 显示储物柜编号
  - 显示开始时间和结束时间
  - 显示储物柜状态（使用中/正常/已到期）
- **剩余时间显示**：
  - 显示剩余使用时间
  - 7天内到期显示警告颜色
- **状态标识**：
  - 正常：绿色
  - 已到期：红色
  - 使用中：灰色

### ✅ 6. 签到记录模块 (`pages/attendance/attendance.vue`)

- **签到历史**：
  - 显示所有签到记录
  - 显示课程名称（如有）
  - 显示签到时间
  - 显示签退时间（如有）
- **准时标识**：
  - 准时：绿色
  - 迟到：黄色

### ✅ 7. 个人中心模块 (`pages/profile/profile.vue`)

- **用户信息展示**：
  - 显示用户头像（用户名首字母）
  - 显示用户名和角色
- **基本信息编辑**：
  - 用户名（只读）
  - 邮箱（可编辑）
  - 手机号（可编辑）
  - 注册时间（只读）
  - 会员状态（只读）
  - 保存修改功能
- **修改密码**：
  - 原密码输入
  - 新密码输入（至少6位）
  - 确认密码输入
  - 密码修改功能
- **其他功能**：
  - 快速导航到"我的预约"
  - 快速导航到"签到记录"
  - 退出登录功能

## 技术实现

### API 请求封装 (`utils/request.js`)
- 统一的请求封装
- 自动添加 Authorization header
- 自动处理 token 过期（401）
- GET 请求自动转换为 query 参数
- 统一的错误处理

### 状态管理 (`store/user.js`)
- 用户信息管理
- Token 管理
- 登录状态判断
- 角色判断（admin/member/coach）
- 用户信息规范化处理

### 工具函数 (`utils/date.js`)
- 日期格式化
- 日期过期判断
- 剩余时间计算

## 页面路由配置

### TabBar 页面（底部导航）
1. **首页** (`pages/index/index`)
2. **课程** (`pages/courses/courses`)
3. **我的** (`pages/profile/profile`)

### 普通页面
1. **登录** (`pages/login/login`) - 启动页
2. **注册** (`pages/register/register`)
3. **我的预约** (`pages/reservations/reservations`)
4. **储物柜** (`pages/lockers/lockers`)
5. **签到记录** (`pages/attendance/attendance`)

## 配置说明

### API 地址配置

在 `utils/request.js` 中修改：

```javascript
const BASE_URL = 'http://localhost:8080/api' // 根据实际情况修改
```

### 登录检查

主要页面（首页、课程、个人中心）都添加了登录检查，未登录用户会自动跳转到登录页。

## 注意事项

1. **MVP 版本**：当前为 MVP（最小可行产品）版本，功能已实现但可能不够完善
2. **API 地址**：需要根据实际后端地址修改 `utils/request.js` 中的 `BASE_URL`
3. **TabBar 图标**：当前使用纯文字导航，如需图标请添加图标文件到 `static/` 目录
4. **错误处理**：部分错误处理较为简单，生产环境需要完善
5. **数据验证**：前端验证已实现，但建议后端也要做相应验证
6. **安全性**：Token 存储在本地存储，生产环境建议使用更安全的存储方式

## 已知问题

1. 部分页面可能需要优化加载状态
2. 错误提示可能需要更友好的展示
3. 部分功能可能需要添加更多交互反馈

## 后续优化建议

- [ ] 添加下拉刷新和上拉加载
- [ ] 添加图片上传功能
- [ ] 添加消息通知功能
- [ ] 添加数据统计图表
- [ ] 优化加载状态和错误提示
- [ ] 添加离线缓存功能
- [ ] 添加分享功能
- [ ] 优化 UI/UX 设计

## 运行说明

1. 使用 HBuilderX 打开项目
2. 修改 `utils/request.js` 中的 `BASE_URL` 为实际后端地址
3. 运行到微信开发者工具或其他平台
4. 首次使用需要注册账号，然后登录

## 问题反馈

如有问题，请随时反馈。

